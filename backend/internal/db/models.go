// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0

package db

import (
	"database/sql"
	"time"

	"github.com/sqlc-dev/pqtype"
)

type AdminAuditLog struct {
	ID           int32
	Action       string
	ResourceType string
	ResourceID   sql.NullString
	UserID       string
	Details      pqtype.NullRawMessage
	IpAddress    sql.NullString
	CreatedAt    sql.NullTime
}

type Comment struct {
	ID          string
	PostID      string
	AuthorID    int32
	SubredditID int32
	ParentID    sql.NullString
	Body        sql.NullString
	CreatedAt   sql.NullTime
	Score       sql.NullInt32
	LastSeen    sql.NullTime
	Depth       sql.NullInt32
	UpdatedAt   sql.NullTime
}

type CrawlJob struct {
	ID          int32
	SubredditID int32
	Status      string
	Priority    sql.NullInt32
	Retries     sql.NullInt32
	LastAttempt sql.NullTime
	DurationMs  sql.NullInt32
	EnqueuedBy  sql.NullString
	CreatedAt   sql.NullTime
	UpdatedAt   sql.NullTime
	// Timestamp when the job becomes visible/available for processing
	VisibleAt sql.NullTime
	// Timestamp for next retry attempt (if failed)
	NextRetryAt sql.NullTime
	// Number of times this job has been retried
	RetryCount sql.NullInt32
	// Maximum number of retries before giving up
	MaxRetries sql.NullInt32
}

type GraphBundle struct {
	SourceCommunityID int32
	TargetCommunityID int32
	Weight            int32
	AvgStrength       sql.NullFloat64
	ControlX          sql.NullFloat64
	ControlY          sql.NullFloat64
	ControlZ          sql.NullFloat64
	CreatedAt         sql.NullTime
	UpdatedAt         sql.NullTime
}

type GraphCommunity struct {
	ID         int32
	Label      string
	Size       int32
	Modularity sql.NullFloat64
	CreatedAt  sql.NullTime
	UpdatedAt  sql.NullTime
}

type GraphCommunityHierarchy struct {
	NodeID            string
	Level             int32
	CommunityID       int32
	ParentCommunityID sql.NullInt32
	CentroidX         sql.NullFloat64
	CentroidY         sql.NullFloat64
	CentroidZ         sql.NullFloat64
	CreatedAt         sql.NullTime
}

type GraphCommunityLink struct {
	SourceCommunityID int32
	TargetCommunityID int32
	Weight            int32
	CreatedAt         sql.NullTime
	UpdatedAt         sql.NullTime
}

type GraphCommunityMember struct {
	CommunityID int32
	NodeID      string
}

type GraphDatum struct {
	ID        int32
	DataType  string
	NodeID    sql.NullString
	NodeName  sql.NullString
	NodeValue sql.NullString
	NodeType  sql.NullString
	Source    sql.NullString
	Target    sql.NullString
	UpdatedAt sql.NullTime
}

// Stores differences between graph versions for incremental updates
type GraphDiff struct {
	ID        int64
	VersionID int64
	// Type of change: add (new entity), remove (deleted entity), update (modified entity)
	Action string
	// Type of entity: node or link
	EntityType string
	// ID of the entity that changed
	EntityID string
	// Previous value for nodes (null for add/remove)
	OldVal sql.NullString
	// New value for nodes (null for remove)
	NewVal    sql.NullString
	OldPosX   sql.NullFloat64
	OldPosY   sql.NullFloat64
	OldPosZ   sql.NullFloat64
	NewPosX   sql.NullFloat64
	NewPosY   sql.NullFloat64
	NewPosZ   sql.NullFloat64
	CreatedAt time.Time
}

type GraphLink struct {
	ID        int32
	Source    string
	Target    string
	CreatedAt sql.NullTime
	UpdatedAt sql.NullTime
}

type GraphNode struct {
	ID        string
	Name      string
	Val       sql.NullString
	Type      sql.NullString
	PosX      sql.NullFloat64
	PosY      sql.NullFloat64
	PosZ      sql.NullFloat64
	CreatedAt sql.NullTime
	UpdatedAt sql.NullTime
}

// Tracks graph precalculation versions with timestamps and statistics
type GraphVersion struct {
	// Monotonically increasing version ID
	ID        int64
	CreatedAt time.Time
	NodeCount int32
	LinkCount int32
	// Version status: pending, completed, or failed
	Status            string
	PrecalcDurationMs sql.NullInt32
	// True if this was a full rebuild vs incremental update
	IsFullRebuild bool
}

type OauthAccount struct {
	ID             int32
	RedditUserID   string
	RedditUsername string
	AccessToken    string
	RefreshToken   string
	ExpiresAt      time.Time
	Scopes         string
	CreatedAt      sql.NullTime
	UpdatedAt      sql.NullTime
}

type Post struct {
	ID          string
	SubredditID int32
	AuthorID    int32
	Title       sql.NullString
	Selftext    sql.NullString
	Permalink   sql.NullString
	CreatedAt   sql.NullTime
	Score       sql.NullInt32
	Flair       sql.NullString
	Url         sql.NullString
	IsSelf      sql.NullBool
	LastSeen    sql.NullTime
	UpdatedAt   sql.NullTime
}

// Tracks the state and timestamp of graph precalculation runs
type PrecalcState struct {
	ID int32
	// Timestamp of the last precalculation (incremental or full)
	LastPrecalcAt sql.NullTime
	// Timestamp of the last full precalculation
	LastFullPrecalcAt sql.NullTime
	// Total number of nodes in the last precalculation
	TotalNodes sql.NullInt32
	// Total number of links in the last precalculation
	TotalLinks sql.NullInt32
	// Duration of the last precalculation in milliseconds
	PrecalcDurationMs sql.NullInt32
	CurrentVersionID  sql.NullInt64
	CreatedAt         sql.NullTime
	UpdatedAt         sql.NullTime
}

// Scheduled recurring crawl jobs with cron-like scheduling
type ScheduledJob struct {
	ID          int32
	Name        string
	Description sql.NullString
	SubredditID sql.NullInt32
	// Cron expression (standard 5-7 field format) or @every duration
	CronExpression string
	Enabled        bool
	// Last execution time
	LastRunAt sql.NullTime
	// Next scheduled execution time
	NextRunAt time.Time
	Priority  sql.NullInt32
	CreatedAt sql.NullTime
	UpdatedAt sql.NullTime
	CreatedBy sql.NullString
}

type ServiceSetting struct {
	Key   string
	Value string
}

type Subreddit struct {
	ID          int32
	Name        string
	Title       sql.NullString
	Description sql.NullString
	Subscribers sql.NullInt32
	CreatedAt   sql.NullTime
	LastSeen    sql.NullTime
	UpdatedAt   sql.NullTime
}

type SubredditRelationship struct {
	ID                int32
	SourceSubredditID int32
	TargetSubredditID int32
	OverlapCount      int32
	CreatedAt         sql.NullTime
	UpdatedAt         sql.NullTime
}

type User struct {
	ID        int32
	Username  string
	CreatedAt sql.NullTime
	LastSeen  sql.NullTime
	UpdatedAt sql.NullTime
}

type UserSubredditActivity struct {
	ID            int32
	UserID        int32
	SubredditID   int32
	ActivityCount int32
	CreatedAt     sql.NullTime
	UpdatedAt     sql.NullTime
}
